import React,{useState,useEffect}from'react';import axios from'axios';const AntiGravityDashboard=()=>{const[validations,setValidations]=useState([]);const[loading,setLoading]=useState(false);const[syncStatus,setSyncStatus]=useState({});useEffect(()=>{fetchValidations()},[]);const fetchValidations=async()=>{setLoading(true);try{const response=await axios.get('/api/v1/validations',{headers:{'Authorization':`Bearer ${localStorage.getItem('token')}`}});setValidations(response.data||[])}catch(error){console.error('Error fetching validations:',error)}finally{setLoading(false)}};const syncToAntiGravity=async(validationId)=>{try{const response=await axios.post('/api/v1/antiGravity/sync-validation',{validation_id:validationId,data:validations.find(v=>v.id===validationId)},{headers:{'Authorization':`Bearer ${localStorage.getItem('token')}`}});setSyncStatus({...syncStatus,[validationId]:response.data});alert('Validation synced successfully!')}catch(error){alert('Failed to sync validation')}};return(<div style={{padding:'20px',fontFamily:'Arial'}}><h2>AntiGravity Integration Dashboard</h2><p>Total Validations: {validations.length}</p>{loading?<p>Loading...</p>:<table style={{width:'100%',borderCollapse:'collapse'}}><thead><tr style={{backgroundColor:'#f0f0f0'}}><th style={{border:'1px solid #ddd',padding:'8px'}}>ID</th><th style={{border:'1px solid #ddd',padding:'8px'}}>Status</th><th style={{border:'1px solid #ddd',padding:'8px'}}>Action</th></tr></thead><tbody>{validations.map(v=>(<tr key={v.id}><td style={{border:'1px solid #ddd',padding:'8px'}}>{v.id}</td><td style={{border:'1px solid #ddd',padding:'8px'}}>{syncStatus[v.id]?.status||'Pending'}</td><td style={{border:'1px solid #ddd',padding:'8px'}}><button onClick={()=>syncToAntiGravity(v.id)}>Sync</button></td></tr>))}</tbody></table>}</div>)};export default AntiGravityDashboard;
